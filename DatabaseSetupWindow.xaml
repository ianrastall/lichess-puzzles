<Window x:Class="Lichess_Puzzles.DatabaseSetupWindow"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
Title="Lichess Puzzles - Database Setup" 
Height="500" Width="600"
WindowStartupLocation="CenterScreen"
ResizeMode="CanResize"
MinHeight="400" MinWidth="500"
Icon="pack://application:,,,/AppIcon.ico"
Background="{DynamicResource BackgroundBrush}">
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        
        <!-- Header -->
        <TextBlock Grid.Row="0" Text="Puzzle Database Setup" FontSize="24" FontWeight="Bold" 
                   Margin="0,0,0,10"/>
        
        <!-- Description -->
        <TextBlock Grid.Row="1" x:Name="DescriptionText" TextWrapping="Wrap" Margin="0,0,0,15"
                   Foreground="{DynamicResource SecondaryTextBrush}">
            The puzzle database needs to be downloaded from Lichess. This is a one-time download of approximately 250 MB that will be decompressed into a local database containing ~5.6 million puzzles.
        </TextBlock>
        
        <!-- Status area -->
        <StackPanel Grid.Row="2" Margin="0,0,0,10">
            <TextBlock x:Name="StatusText" Text="Ready to download" FontSize="14" FontWeight="SemiBold" 
                       TextWrapping="Wrap" Margin="0,0,0,5"/>
            <TextBlock x:Name="DatabaseInfoText" Text="" FontSize="12" 
                       Foreground="{DynamicResource SecondaryTextBrush}"/>
        </StackPanel>
        
        <!-- Progress bar with percentage -->
        <Grid Grid.Row="3" Margin="0,0,0,15">
            <ProgressBar x:Name="ProgressBar" Height="24" Minimum="0" Maximum="100" Value="0"/>
            <TextBlock x:Name="ProgressText" Text="0%" HorizontalAlignment="Center" VerticalAlignment="Center" 
                       FontWeight="SemiBold"/>
        </Grid>
        
        <!-- Log output area -->
        <Border Grid.Row="4" BorderBrush="{DynamicResource BorderBrush}" BorderThickness="1" 
                CornerRadius="4" Margin="0,0,0,15">
            <ScrollViewer x:Name="LogScrollViewer" VerticalScrollBarVisibility="Auto">
                <TextBox x:Name="LogTextBox" IsReadOnly="True" TextWrapping="Wrap" 
                         BorderThickness="0" Background="Transparent" 
                         FontFamily="Consolas" FontSize="11"
                         VerticalScrollBarVisibility="Disabled"/>
            </ScrollViewer>
        </Border>
        
        <!-- Buttons -->
        <StackPanel Grid.Row="5" Orientation="Horizontal" HorizontalAlignment="Center">
            <Button x:Name="BtnDownload" Content="Download Database" Click="BtnDownload_Click" 
                    Width="150" Margin="0,0,10,0" Padding="10,8"/>
            <Button x:Name="BtnCancel" Content="Cancel" Click="BtnCancel_Click" 
                    Width="100" Padding="10,8" IsEnabled="False"/>
        </StackPanel>
        
        <!-- Skip/Continue button -->
        <Button Grid.Row="6" x:Name="BtnContinue" Content="Continue" Click="BtnContinue_Click"
                HorizontalAlignment="Center" Width="150" Margin="0,15,0,0" Padding="10,8"
                Visibility="Collapsed"/>
    </Grid>
</Window>
